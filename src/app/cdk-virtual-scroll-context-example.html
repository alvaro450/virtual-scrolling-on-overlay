
<!-- This button triggers the overlay and is it's origin -->
<button (click)="isOpen = !isOpen" type="button" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
  {{isOpen ? "Close" : "Open"}}
</button>

<!-- This template displays the overlay content and is connected to the button -->
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="isOpen">
	<cdk-virtual-scroll-viewport [itemSize]="20" class="example-viewport">
		<ng-container *cdkVirtualFor="let item of items; trackBy: trackById">
			<div *ngIf="!item.group || (!!item.belongsToSubGroupId && item.expanded)"
				[ngClass]="{'sub-group-item--hidden': !!item.belongsToSubGroupId && !item.expanded}"
				class="sub-group-item">
				<button  style="height: 25px;" *ngIf="item.subGroup" type="button" (click)="expandCollapseGroup(item)">></button>
				<mat-checkbox *ngIf="!item.group" class="fa-item" (change)="selectWholeGroup(item)"
					[checked]="item.selected"
					[ngClass]="{'grouped-item': !!item.belongsToSubGroupId, 'sub-group': item.subGroup }">
					{{item.display}}
				</mat-checkbox>
			</div>
			<div class="fa-item" *ngIf="item.group" [ngClass]="{'group': item.group }">{{ item.display }}</div>
		</ng-container>
	</cdk-virtual-scroll-viewport>
</ng-template>


	<cdk-virtual-scroll-viewport [itemSize]="20" class="example-viewport">
		<ng-container *cdkVirtualFor="let item of items; trackBy: trackById">
			<div *ngIf="!item.group || (!!item.belongsToSubGroupId && item.expanded)"
				[ngClass]="{'sub-group-item--hidden': !!item.belongsToSubGroupId && !item.expanded}"
				class="sub-group-item">
				<button  style="height: 25px;" *ngIf="item.subGroup" type="button" (click)="expandCollapseGroup(item)">></button>
				<mat-checkbox *ngIf="!item.group" class="fa-item" (change)="selectWholeGroup(item)"
					[checked]="item.selected"
					[ngClass]="{'grouped-item': !!item.belongsToSubGroupId, 'sub-group': item.subGroup }">
					{{item.display}}
				</mat-checkbox>
			</div>
			<div class="fa-item" *ngIf="item.group" [ngClass]="{'group': item.group }">{{ item.display }}</div>
		</ng-container>
	</cdk-virtual-scroll-viewport>
<!-- <cdk-virtual-scroll-viewport [itemSize]="itemSize" class="example-viewport">
			<ng-container *cdkVirtualFor="let item of items; trackBy: trackById">
				<div *ngIf="!item.group" style="display: flex; flex-direction: row; height: 35px">
					<button  style="height: 25px;" *ngIf="item.subGroup" type="button" (click)="expandCollapseGroup(item)">></button>
					<mat-checkbox *ngIf="!item.group" class="fa-item" (change)="selectWholeGroup(item)"
						[checked]="item.selected"
						[ngClass]="{'grouped-item': !!item.belongsToSubGroupId, 'sub-group': item.subGroup, 'sub-group-item--hidden': !!item.belongsToSubGroupId && !item.expanded}">
						{{item.display}}
					</mat-checkbox>
				</div>
				<div class="fa-item" *ngIf="item.group" [ngClass]="{'group': item.group }">{{ item.display }}</div>
			</ng-container>
		</cdk-virtual-scroll-viewport> -->


{{ getElementCount() }}

<!-- Copyright 2020 Google LLC. All Rights Reserved.
    Use of this source code is governed by an MIT-style license that
    can be found in the LICENSE file at http://angular.io/license -->